<!--<div class="container mt-4">-->
<!--  <div *ngIf="isLoading" class="text-center"><strong>Carregando...</strong></div>-->

<!--  <div *ngIf="!isLoading">-->
<!--    <div *ngIf="assinaturaAtiva; else semAssinatura">-->

<!--      <div class="mb-2 msg-topo text-center">-->
<!--        <h1 class="display-6">Gerenciar Minha Assinatura</h1>-->
<!--      </div>-->

<!--      &lt;!&ndash; Card do Plano Atual &ndash;&gt;-->
<!--      <div class="card mb-4">-->
<!--        <div class="card-header">-->
<!--          <h4>Seu Plano Atual</h4>-->
<!--        </div>-->
<!--        <div class="card-body">-->
<!--          <h3>{{ assinaturaAtiva.plano?.descricao }}</h3>-->
<!--          <p class="lead">R$ {{ assinaturaAtiva.plano?.valor | number:'1.2-2' }} /mês</p>-->
<!--          <p>Assinatura ativa desde: {{ assinaturaAtiva.dataInicio | date:'dd/MM/yyyy' }}</p>-->
<!--        </div>-->
<!--      </div>-->

<!--      &lt;!&ndash; Card para Trocar de Plano &ndash;&gt;-->
<!--      <div class="card mb-4">-->
<!--        <div class="card-header">-->
<!--          <h4>Trocar de Plano</h4>-->
<!--        </div>-->
<!--        <div class="card-body">-->
<!--          <p>Selecione um novo plano da lista abaixo.</p>-->
<!--          <div class="input-group">-->
<!--            <select class="form-select" [(ngModel)]="idNovoPlano">-->
<!--              <option [ngValue]="undefined" disabled>Escolha um plano...</option>-->
<!--              <option *ngFor="let plano of outrosPlanos" [value]="plano.id">-->
<!--                {{ plano.descricao }} (R$ {{ plano.valor | number:'1.2-2' }}/mês)-->
<!--              </option>-->
<!--            </select>-->
<!--            <button class="btn btn-primary" (click)="trocarPlano()" [disabled]="!idNovoPlano">-->
<!--              Confirmar Troca-->
<!--            </button>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->

<!--      &lt;!&ndash; Card para Cancelar Assinatura &ndash;&gt;-->
<!--      <div class="card border-danger">-->
<!--        <div class="card-header bg-danger text-white">-->
<!--          <h4>Cancelar Assinatura</h4>-->
<!--        </div>-->
<!--        <div class="card-body">-->
<!--          <p>Se você cancelar, seu acesso continuará até o final do ciclo de pagamento atual.</p>-->
<!--          <button class="btn btn-danger" (click)="cancelar()">-->
<!--            Cancelar Minha Assinatura-->
<!--          </button>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->

<!--    <ng-template #semAssinatura>-->
<!--      <div class="alert alert-warning text-center">-->
<!--        Você não possui uma assinatura ativa para gerenciar.-->
<!--        <a routerLink="/planos" class="alert-link">Ver nossos planos.</a>-->
<!--      </div>-->
<!--    </ng-template>-->
<!--  </div>-->
<!--</div>-->


<div class="container mt-4">
  <!-- Cabeçalho da Página -->
  <div class="mb-4 text-center">
    <h1 class="display-6">Gerenciar Minha Assinatura</h1>
  </div>

  <div *ngIf="isLoading" class="text-center"><strong>Carregando...</strong></div>

  <div *ngIf="!isLoading">
    <!-- Verificação se existe assinatura ativa -->
    <div *ngIf="assinaturaAtiva; else semAssinatura">

      <!-- ========================================================== -->
      <!--      NOVO LAYOUT DE DASHBOARD (6 + 6)                    -->
      <!-- ========================================================== -->
      <div class="row">

        <!-- COLUNA DA ESQUERDA (Informação) -->
        <div class="col-md-6 mb-4">
          <div class="card h-100">
            <div class="card-header">
              <h4>Seu Plano Atual</h4>
            </div>
            <div class="card-body">
              <h3 class="display-6">{{ assinaturaAtiva.plano?.descricao }}</h3>
              <p class="lead">R$ {{ assinaturaAtiva.plano?.valor | number:'1.2-2' }} /mês</p>
              <hr>
              <p class="text-white-50">Assinatura ativa desde: {{ assinaturaAtiva.dataInicio | date:'dd/MM/yyyy' }}</p>
            </div>
          </div>
        </div>

        <!-- COLUNA DA DIREITA (Ações) -->
        <div class="col-md-6 mb-4">
          <div class="d-flex flex-column h-100">

            <!-- Card para Trocar de Plano -->
            <div class="card mb-4">
              <div class="card-header">
                <h4>Trocar de Plano</h4>
              </div>
              <div class="card-body">
                <p>Selecione um novo plano da lista abaixo.</p>
                <div class="input-group">
                  <select class="form-select" [(ngModel)]="idNovoPlano">
                    <option [ngValue]="undefined" disabled>Escolha um plano...</option>
                    <option *ngFor="let plano of outrosPlanos" [value]="plano.id">
                      {{ plano.descricao }} (R$ {{ plano.valor | number:'1.2-2' }}/mês)
                    </option>
                  </select>
                  <button class="btn btn-primary" (click)="trocarPlano()" [disabled]="!idNovoPlano">
                    Confirmar Troca
                  </button>
                </div>
              </div>
            </div>

            <!-- Card para Cancelar Assinatura -->
            <div class="card border-danger">
              <div class="card-header bg-danger text-white">
                <h4>Cancelar Assinatura</h4>
              </div>
              <div class="card-body">
                <p>Se você cancelar, seu acesso continuará até o final do ciclo de pagamento atual.</p>
                <button class="btn btn-danger" (click)="cancelar()">
                  Cancelar Minha Assinatura
                </button>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>

    <!-- Mensagem para quando não há assinatura -->
    <ng-template #semAssinatura>
      <div class="alert alert-warning text-center">
        Você não possui uma assinatura ativa para gerenciar.
        <a routerLink="/planos" class="alert-link">Ver nossos planos.</a>
      </div>
    </ng-template>
  </div>
</div>
